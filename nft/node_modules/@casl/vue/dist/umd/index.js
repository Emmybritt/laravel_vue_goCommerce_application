(function(i,n){"object"===typeof exports&&"undefined"!==typeof module?n(exports,require("vue"),require("@casl/ability")):"function"===typeof define&&define.amd?define(["exports","vue","@casl/ability"],n):(i="undefined"!==typeof globalThis?globalThis:i||self,n((i.casl=i.casl||{},i.casl.vue={}),i.Vue,i.casl))})(this,(function(i,n,t){"use strict";function reactiveAbility(i){if(i.hasOwnProperty("possibleRulesFor"))return i;var t=n.ref(true);i.on("updated",(function(){t.value=!t.value}));var e=i.possibleRulesFor.bind(i);i.possibleRulesFor=function(i,n){t.value=t.value;return e(i,n)};i.can=i.can.bind(i);i.cannot=i.cannot.bind(i);return i}var e=Symbol("ability");function useAbility(){var i=n.inject(e);if(!i)throw new Error("Cannot inject Ability instance because it was not provided");return i}function provideAbility(i){n.provide(e,reactiveAbility(i))}function r(i){if("a"in i)return"a";if("this"in i)return"this";if("an"in i)return"an";return""}var o=n.defineComponent({name:"Can",props:{I:String,do:String,a:[String,Function],an:[String,Function],this:[String,Function,Object],on:[String,Function,Object],not:Boolean,passThrough:Boolean,field:String},setup:function i(n,t){var e=t.slots;var o=n;var u="do";var a="on";if(!(u in n)){u="I";a=r(n)}if(!o[u])throw new Error("Neither `I` nor `do` prop was passed in <Can>");if(!e.default)throw new Error("Expects to receive default slot");var l=useAbility();return function(){var i=l.can(o[u],o[a],o.field);var t=n.not?!i:i;if(!n.passThrough)return t?e.default():null;return e.default({allowed:t,ability:l})}}});function u(i,n,r){if(!n||!(n instanceof t.PureAbility))throw new Error("Please provide an Ability instance to abilitiesPlugin plugin");i.provide(e,reactiveAbility(n));if(r&&r.useGlobalProperties){i.config.globalProperties.$ability=n;i.config.globalProperties.$can=n.can.bind(n)}}i.ABILITY_TOKEN=e;i.Can=o;i.abilitiesPlugin=u;i.provideAbility=provideAbility;i.useAbility=useAbility;Object.defineProperty(i,"__esModule",{value:true})}));
//# sourceMappingURL=index.js.map
